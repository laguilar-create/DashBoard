<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de Power BI Protegido</title>
    <!-- Carga de Tailwind CSS para un diseño moderno y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Aplicar la fuente Inter y asegurar que el iframe ocupe todo el espacio */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Evita barras de desplazamiento innecesarias en el cuerpo */
        }
        #report-container, #report-iframe {
            width: 100%;
            height: 100vh; /* 100% de la altura de la ventana */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6', // Un azul vibrante
                        'primary-dark': '#2563EB',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">

    <!-- Contenedor del Informe (Inicialmente oculto) -->
    <div id="report-container" class="hidden">
        <!-- El iframe de Power BI a pantalla completa -->
        <iframe
            id="report-iframe"
            title="INFORME PAYU-BRAINTREE"
            src="https://app.powerbi.com/reportEmbed?reportId=17ce2983-2c0b-4b9c-8312-0e4536cfe838&autoAuth=true&ctid=f509b338-5b06-42b0-9734-10ead32adeb7"
            frameborder="0"
            allowFullScreen="true"
        ></iframe>
    </div>

    <!-- Capa de Contraseña (Inicialmente visible) -->
    <div id="password-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-95 flex items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white p-8 sm:p-10 rounded-xl shadow-2xl w-full max-w-sm transform transition-all duration-300 scale-100 hover:scale-[1.01]">
            <h2 class="text-3xl font-extrabold text-gray-800 mb-2">Acceso Restringido</h2>
            <p class="text-gray-600 mb-6">Introduce la contraseña para ver el informe.</p>

            <div class="space-y-4">
                <input
                    type="password"
                    id="password-input"
                    placeholder="Contraseña"
                    class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-primary-dark focus:ring-1 focus:ring-primary-dark outline-none text-lg transition duration-150"
                    aria-label="Campo de Contraseña"
                >
                <button
                    onclick="checkPassword()"
                    class="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-3 rounded-lg shadow-md hover:shadow-lg transition duration-200 transform hover:scale-[1.01] focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
                >
                    Acceder al Informe
                </button>
            </div>

            <p id="error-message" class="text-red-500 text-center mt-4 font-medium h-5"></p>
        </div>
    </div>

    <script>
        // La contraseña requerida
        const CORRECT_PASSWORD = "KubiEurona02%";

        /**
         * Verifica la contraseña introducida por el usuario.
         */
        function checkPassword() {
            const inputElement = document.getElementById('password-input');
            const input = inputElement.value;
            const overlay = document.getElementById('password-overlay');
            const reportContainer = document.getElementById('report-container');
            const errorMessage = document.getElementById('error-message');

            if (input === CORRECT_PASSWORD) {
                // Contraseña correcta: Oculta el overlay y muestra el informe
                overlay.classList.add('opacity-0');
                
                // Espera a que termine la transición de opacidad antes de ocultar completamente
                setTimeout(() => {
                    overlay.classList.add('hidden');
                    reportContainer.classList.remove('hidden');
                }, 300); 

                // Limpia el campo de entrada y el error
                inputElement.value = '';
                errorMessage.textContent = '';
                
            } else {
                // Contraseña incorrecta: Muestra mensaje de error y limpia el campo
                errorMessage.textContent = 'Contraseña incorrecta. Inténtalo de nuevo.';
                inputElement.value = '';
                inputElement.focus(); // Vuelve a enfocar para facilitar el reintento
            }
        }

        // Agrega un listener para presionar 'Enter' en el campo de contraseña
        document.getElementById('password-input').addEventListener('keypress', function(e) {
            // Verifica si la tecla presionada es 'Enter' (código 13 o 'Enter')
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Opcional: Asegura que el foco esté en el campo de entrada al cargar la página
        window.onload = () => {
             document.getElementById('password-input').focus();
        };

    </script>
</body>
</html>

